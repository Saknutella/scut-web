# SCUT Campus Network Bypass

This document provides a detailed explanation of the SCUT campus network bypass system. It outlines the system's architecture, the function of each component, and the necessary steps for deployment.

## System Architecture

The system utilizes a single-arm router model with a virtual side-router implemented using `macvlan`. This setup allows for transparently proxying network traffic without complex routing configurations. The entire system is containerized using Docker, with each service running in its own container.

## Services

### 1. scutweb

*   **Purpose:** This is the core service responsible for bypassing the campus network's captive portal. It provides IPv4 and IPv6 internet access through HTTP, SOCKS5, and TProxy protocols.
*   **Docker Image:** `dnomd343/tproxy:v1.3`
*   **Configuration:** The service is configured through files in the `/etc/scutweb` directory, which is mounted from the host. This includes Xray configuration files for routing, inbounds, and outbounds.

### 2. cleardns

*   **Purpose:** This service provides a clean and unfiltered DNS service. It blocks ads, prevents DNS pollution, and can hijack specific domains. It uses AdGuardHome for its core functionality.
*   **Docker Image:** `dnomd343/cleardns:v1.2`
*   **Configuration:** The service is configured through files in the `/etc/cleardns` directory. This includes the main `cleardns.yml` configuration file and AdGuardHome settings.

### 3. route

*   **Purpose:** This service acts as a virtual router for the internal network. It intercepts and filters client traffic based on a set of rules, and it can be used to manage client access.
*   **Docker Image:** `dnomd343/tproxy:v1.3`
*   **Configuration:** The routing rules are dynamically generated by the `start.sh` script and are based on files in the `/etc/route/rules` directory.

### 4. freedom

*   **Purpose:** This service provides an outbound proxy for accessing external websites. It supports various encryption protocols.
*   **Docker Image:** `mzz2017/v2raya`
*   **Configuration:** The service is configured through the `/etc/freedom` directory, which is mounted from the host.

### 5. nginx

*   **Purpose:** This service provides a web-based management interface for the entire system. It uses a reverse proxy to provide access to the different services.
*   **Configuration:** The Nginx configuration files are located in the `/etc/nginx/conf.d` directory. Each service has its own configuration file, which defines the reverse proxy settings.

## Deployment

To deploy the system, you will need a machine running a Linux distribution with Docker installed. The following steps outline the deployment process:

1.  **Clone the repository:**
    ```bash
    git clone <repository-url>
    ```
2.  **Configure the services:**
    *   Each service has its own configuration directory. You will need to edit the configuration files in each directory to match your network setup.
    *   Pay close attention to the `macvlan` network configuration in the `start.sh` scripts for each service.
3.  **Start the services:**
    *   Each service can be started by running the `start.sh` script in its respective directory.
    *   It is recommended to start the services in the following order: `cleardns`, `scutweb`, `route`, `freedom`, `nginx`.

## Software Used

The following is a list of the key software and technologies used in this project:

*   [Docker](https://docs.docker.com/)
*   [TProxy](https://github.com/dnomd343/TProxy)
*   [ClearDNS](https://github.com/dnomd343/ClearDNS)
*   [Xray](https://xtls.github.io/)
*   [AdGuardHome](https://github.com/AdguardTeam/AdguardHome)
*   [Nginx](https://nginx.org/en/docs/)
*   [v2rayA](https://github.com/v2rayA/v2rayA)
